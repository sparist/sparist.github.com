<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Sparist Coding Standard</title>
		<link href="http://fonts.googleapis.com/css?family=Lato:300" rel="stylesheet" type="text/css" />
		<style>
			body {
				font-family: "Lato", "Helvetica", serif;
				color: #333;
			}
			section {
				margin-bottom: 1.5em;
				margin-top: 1.5em;
			}
			li, p {
				margin-top: 0.5em;
				margin-bottom: 0.5em;
			}
			dt {
				margin-top: 0.5em;
				margin-bottom: 0.5em;
			}
		</style>
		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
	</head>

	<body>
		<section>
			<h1>Sparist C++ Coding Standard</h1>

			<p>This document defines the coding standard for all <a href="http://sparist.com">Sparist</a> C++ projects.</p>

			<section>
				<h1>Rules and Recommendations</h1>

				<p>All rules and recommendations defined by the <a href="http://www.securecoding.cert.org/confluence/pages/viewpage.action?pageId=637">CERT C++ Secure Coding Standard</a> must be followed.
			</section>

			<section>
				<h1>Style</h1>

				<p>All code must be stylistically consistent.</p>

				<p>This section attempts to codify the style used in the code.  For any case in which the rules are unclear, refer to the code.</p>

				<section>
					<h1>Terms</h1>
					
					<p>The following terms are used to represent syntactic concepts in C++ for the purposes of this document.</p>

					<dl>
						<dt>List:</dt>
						<dd>A sequence of elements delimited by one of the following sets of <dfn>delimiter symbols</dfn>:<ul>
							<li><code>,</code></li>
							<li><code>;</code></li>
							<li><code>?</code> or <code>:</code></li>
							<li><code>and</code> or <code>or</code></li>
						</ul></dd>

						<dt>Enclosure:</dt>
						<dd>A list wrapped by one of the following sets of <dfn>enclosure symbols</dfn>:<ul>
							<li><code>{</code> and <code>}</code></li>
							<li><code>(</code> and <code>)</code></li>
							<li><code>[</code> and <code>]</code></li>
						</ul></dd>

						<dt>Composite:</dt>
						<dd>One of the following:<ul>
							<li><code>class</code></li>
							<li><code>struct</code></li>
							<li><code>union</code></li>
							<li><code>enum</code></li>
						</ul></dd>

						<dt>Label:</dt>
						<dd>A <code>case</code> label, <code>goto</code> label, or access specifier.</dd>
					</dl>
				</section>

				<section>
					<h1>Line Indentation</h1>

					<ul>
						<li>Indent by one tab character for each list that the line is nested within.</li>
						
						<li>Each label is considered part of a list, not inside it, and is indented accordingly.</li>
					</ul>
				</section>

				<section>
					<h1>Empty Lines</h1>

					<ul>
						<li>Declarations, in declaration scope, are surrounded by an empty line.</li>

						<li>Use empty lines sparingly.  There should never be two consecutive empty lines.</li>
					</ul>
				</section>

				<section>
					<h1>Line Breaks</h1>

					<p>Rely on soft wrap for line wrapping.  Line breaks only occur in the following cases:</p>

					<ul>
						<li>After a delimiter symbol.</li>

						<li>Before and after each element of a list for any list that contains more than one element and/or an enclosure.</li>

						<li>Between the declaration and definition portions of a template definition.</li>

						<li>Between the declaration and definition portions of a macro definition.</li>
					</ul>
				</section>

				<section>
					<h1>Spaces</h1>

					<ul>
						<li>Any extraneous white-space (e.g. more than one space consecutively, or space at the end of a line) must be removed.</li>

						<li>There must be a single space:<ul>
							<li>Before and after a curly brace.</li>
	
							<li>Before and after an inline list.</li>
	
							<li>Before and after each binary operator (excluding member and pointer operators).</li>
	
							<li>Before and after the asterisk and ampersand in pointer and reference declarations, respectively.</li>
	
							<li>After the <code>operator</code> keyword.</li>
						</ul></li>
					</ul>
				</section>

				<section>
					<h1>Modifiers/Qualifiers</h1>

					<p>Each modifier/qualifier follows whatever it modifies/qualifies.</p>
				</section>

				<section>
					<h1>Names</h1>

					<p>The following rules apply to all names:</p>

					<ul>
						<li>Capitalize the first letter of each word, and treat acronyms as words.</li>

						<li>Do not abbreviate or add extra words unnecessarily.</li>
					</ul>

					<p>The following additional rules apply to specific types of names.</p>

					<section>
						<h1>Variables</h1>

						<ul>
							<li>Composite: prefix with <code>this</code>.</li>

							<li>Function: prefix with <code>the</code>.</li>
						</ul>
					</section>

					<section>
						<h1>Template Parameters</h1>

						<ul>
							<li>Composite: prefix with <code>This</code>.</li>

							<li>Function: prefix with <code>The</code>.</li>
						</ul>
					</section>

					<section>
						<h1>Macros</h1>

						<ul>
							<li>Macro names end in an underscore.</li>

							<li>Namespace membership is enforced by prefixing the macro name with the namespace names (each followed by an underscore).</li>
						</ul>
					</section>
				</section>

				<section>
					<h1>Files</h1>

					<ul>
						<li>File names are lower case, with spaces replaced with underscores.</li>

						<li>Each file contains one public declaration for which the file is named.</li>
					</ul>
				</section>

				<section>
					<h1>Folders</h1>

					<ul>
						<li>Each namespace is a folder containing everything in the namespace.</li>
					</ul>
				</section>

				<section>
					<h1>Classes</h1>

					<section>					
						<h1>Keyword</h1>

						<p>Use <code>class</code> keyword for C++-style classes.  Use <code>struct</code> and <code>union</code> for C-style composites.</p>
					</section>
					
					<section>
						<h1>Access Specifiers</h1>
						
						<p>Always use explicit access specifiers for base classes and members.</p>
					</section>

					<section>
						<h1>Declaration Order</h1>
	
						<section>
							<h1>Base Classes</h1>
							
							<section>
								<h1>Primary</h1>
	
								<p>Ordered for optimal memory layout.</p>
							</section>
	
							<section>
								<h1>Secondary</h1>
		
								<ol>
									<li>Public</li>
	
									<li>Protected</li>
	
									<li>Private</li>
								</ol>
							</section>
	
							<section>
								<h1>Tertiary</h1>
		
								<p>Alphanumerically sorted.</p>
							</section>
						</section>
	
						<section>
							<h1>Members</h1>
	
							<section>
								<h1>Primary</h1>
		
								<ol>
									<li>Friends</li>
	
									<li>Public</li>
	
									<li>Protected</li>
	
									<li>Private</li>
								</ol>
							</section>
		
							<section>
								<h1>Secondary</h1>
		
								<ol>
									<li>Static</li>
	
									<li>Non-Static</li>
								</ol>
							</section>
		
							<section>
								<h1>Tertiary</h1>
		
								<ol>
									<li>Types</li>
	
									<li>Destructor</li>
	
									<li>Constructors</li>
	
									<li>Operator Overloads</li>
	
									<li>Functions</li>
	
									<li>Values (ordered for optimal memory layout)</li>
								</ol>
							</section>
		
							<section>
								<h1>Quaternary</h1>
		
								<p>Alphanumerically sorted.</p>
							</section>
						</section>
					</section>
				</section>

				<section>
					<h1>Functions</h1>

					<ul>
						<li>Declare functions in the header file.</li>

						<li>Define functions in the source file with <code>inline</code>, and include the source file in the header file.  Check if the include guard is defined to determine whether the source file is being included by the compiler (not defined) or the header file (defined).</li>
					</ul>
				</section>

				<section>
					<h1>Strings</h1>

					<ul>
						<li>All strings are <a href="http://utf8everywhere.org">UTF-8</a> unless impossible.  Exceptions must be clearly documented.</li>
					</ul>
				</section>

				<section>
					<h1>Conditionals</h1>

					<p>Always enclose the conditional statement body in curly braces, even if the body is empty.</p>
				</section>

				<section>
					<h1>Comments</h1>
					
					<ul>
						<li>Use line-style comments for full-line comments, and block-style comments for inline comments.</li>
	
						<li>Use line-style Doxygen comments for commands that act on the code itself (e.g. <code>\cond</code>), and block-style Doxygen comments for documentation.</li>
					</ul>
				</section>

				<section>
					<h1>General</h1>

					<ul>
						<li>Use Xcode <code>MARK</code> markup.  Refer to existing code to see how it is used.</li>

						<li>Always mark virtual functions as virtual (for <a href="http://doxygen.org">Doxygen</a>).</li>

						<li>Err on the side of less code, as code size is the only reliable indicator of bug frequency.</li>
					</ul>
				</section>
			</section>
		</section>
	</body>
</html>
